/ {
    /* Shift-Register 控制 (SN74HC595) */
    shifter: shift_register {
        compatible = "zmk,74hc595";
        /* 顺序：〈latch, clock, data〉 */
        gpios = 
            <&gpio0 2  GPIO_ACTIVE_LOW>  /* RCLK (latch) – SR2  = P0.02 */ 
            <&gpio1 15 GPIO_ACTIVE_LOW>  /* SRCLK (clock) – SR1 = P1.15 */
            <&gpio1 13 GPIO_ACTIVE_LOW>; /* SER (data) – SR0   = P1.13 */
        /* 如果需要，控制位序：0 = Q0 最先推送，7 = Q7 最后 */
        data-order = <0>;
    };

    keyboard {
        compatible = "zmk,keyboard";
        model = "Minila on nice nano v2";

        matrix {
            compatible = "zmk,matrix";
            label = "KEYBOARD_MATRIX";
            #rows    = <8>;
            #columns = <16>;
            diode-direction = "COL2ROW";
            scan-delay = <10>;

            /* 行由 shift_register 的 Q0–Q7 驱动 */
            row-gpios = 
                <&shifter 0>, /* R0 */
                <&shifter 1>, /* R1 */
                <&shifter 2>, /* R2 */
                <&shifter 3>, /* R3 */
                <&shifter 4>, /* R4 */
                <&shifter 5>, /* R5 */
                <&shifter 6>, /* R6 */
                <&shifter 7>; /* R7 */

            /* 列直接连 MCU */
            col-gpios = 
                <&gpio1 1  GPIO_ACTIVE_LOW>, /* C0 → P1.01 */ 
                <&gpio1 2  GPIO_ACTIVE_LOW>, /* C1 → P1.02 */
                <&gpio1 7  GPIO_ACTIVE_LOW>, /* C2 → P1.07 */
                <&gpio0 9  GPIO_ACTIVE_LOW>, /* C3 → P0.09 */
                <&gpio0 10 GPIO_ACTIVE_LOW>, /* C4 → P0.10 */
                <&gpio1 11 GPIO_ACTIVE_LOW>, /* C5 → P1.11 */
                <&gpio1 6  GPIO_ACTIVE_LOW>, /* C6 → P1.06 */
                <&gpio1 4  GPIO_ACTIVE_LOW>, /* C7 → P1.04 */
                <&gpio0 11 GPIO_ACTIVE_LOW>, /* C8 → P0.11 */
                <&gpio1 0  GPIO_ACTIVE_LOW>, /* C9 → P1.00 */
                <&gpio0 24 GPIO_ACTIVE_LOW>, /* C10→ P0.24 */
                <&gpio0 22 GPIO_ACTIVE_LOW>, /* C11→ P0.22 */
                <&gpio0 20 GPIO_ACTIVE_LOW>, /* C12→ P0.20 */
                <&gpio0 6  GPIO_ACTIVE_LOW>, /* C13→ P0.06 */
                <&gpio0 17 GPIO_ACTIVE_LOW>, /* C14→ P0.17 */
                <&gpio0 8  GPIO_ACTIVE_LOW>; /* C15→ P0.08 */
        };
    };
};